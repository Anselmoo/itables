<table id="table_id"><thead><tr><th>A</th></tr></thead></table>
<style>
    table td {
        text-overflow: ellipsis;
        overflow: hidden;
    }
</style>
<style>
    table th {
        text-overflow: ellipsis;
        overflow: hidden;
    }
</style>
<script type="module">
    // This function adds the datatables CSS to the HTML header
    const loadStyle = (url) => {
        let style;
        const styles = Array.from(document.head.querySelectorAll('link'));
        const existingStyle = styles.find((style) => style.href === url);
        if (!existingStyle) {
            style = document.createElement('link');
            style.rel = 'stylesheet';
            style.type = 'text/css';
            style.href = url;
            document.head.appendChild(style);
        }
    };

    let css_url = "https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css";
    let jQuery_url = 'https://esm.sh/jquery@3.6.0';
    let datatables_url = 'https://cdn.datatables.net/1.12.1/js/jquery.dataTables.mjs';

    const static_css = "/static/itables/datatables.net-dt/css/jquery.dataTables.min.css";

    async function url_is_available(url) {
        let ok = false;
        await fetch(url).then(function (response) {
            console.log(response);
            if (response.ok) {
                ok = true;
            }
        })
            .catch(function (error) {
            });
        return ok
    };

    const static_mode = url_is_available(static_css);
    if (static_mode)
        console.log("Found jupyterlab-itables - loading jquery and datatables from the local static folder");
    else
        console.log("The jupyterlab-itables extension was not found. " +
            "The jquery and datatables libraries will be loaded from the web");

    if (static_mode) {
        css_url = static_css;
        jQuery_url = '/static/itables/jquery/src/jquery.js';
        datatables_url = '/static/itables/datatables.net/js/jquery.dataTables.mjs';
    }

    // Import jQuery and datatables
    loadStyle(css_url);
    const { default: $ } = await import(jQuery_url);
    const { default: dt } = await import(datatables_url);
    dt($);

    // Define the table data
    const data = [];

    // Define the dt_args
    let dt_args = {};
    dt_args["data"] = data;

    // Display the table
    $(document).ready(function () {
        $('#table_id').DataTable(dt_args);
    });
</script>
